<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Portal 360 - Unified Workspace Platform</title>
    <meta name="description" content="A unified workspace platform combining task management, client operations, communication, and subscriptions â€” all under one secure, AI-powered dashboard." />
    <meta name="author" content="Portal 360" />

    <meta property="og:title" content="Portal 360 - Unified Workspace Platform" />
    <meta property="og:description" content="From clients to tasks, conversations to billing â€” manage it all from one intelligent, secure platform." />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>

    <!-- ðŸŽ¬ Dynamic Animated Favicon -->
    <video
      id="favVideo"
      src="/logo.mp4"
      autoplay
      loop
      muted
      playsinline
      hidden
    ></video>

    <script>
      const video = document.getElementById("favVideo");
      const canvas = document.createElement("canvas");
      const ctx = canvas.getContext("2d");
      let link = document.querySelector("link[rel='icon']");

      if (!link) {
        link = document.createElement("link");
        link.rel = "icon";
        link.type = "image/png";
        document.head.appendChild(link);
      }

      const size = 32;
      canvas.width = size;
      canvas.height = size;

      video.addEventListener("play", () => {
        function drawFrame() {
          if (!video.paused && !video.ended) {
            ctx.drawImage(video, 0, 0, size, size);
            link.href = canvas.toDataURL("image/png");
            requestAnimationFrame(drawFrame);
          }
        }
        drawFrame();
      });

      video.addEventListener("error", () => {
        console.warn("âš ï¸ Video favicon failed â€” using static favicon instead.");
      });

      // Pause updates when tab inactive (save CPU)
      document.addEventListener("visibilitychange", () => {
        if (document.hidden) video.pause();
        else video.play().catch(() => {});
      });
    </script>
  </body>
</html>
